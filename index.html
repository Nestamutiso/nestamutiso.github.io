<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MindCheck Pro</title>
<style>
  :root {
    --primary: #4a6cf7;
    --bg: #f8f9fa;
    --card: #ffffff;
    --text: #2d3436;
    --good: #4caf50;
    --okay: #ff9800;
    --low: #f44336;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: var(--bg);
    margin: 0;
    color: var(--text);
    padding-bottom: 70px; /* Space for nav */
  }

  header {
    background: var(--primary);
    color: white;
    padding: 30px 20px;
    text-align: center;
    border-radius: 0 0 20px 20px;
  }

  .view { display: none; padding: 20px; max-width: 500px; margin: auto; }
  .view.active { display: block; animation: fadeIn 0.3s; }

  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

  .card {
    background: var(--card);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  }

  /* Mood Buttons */
  .mood-selector { display: flex; justify-content: space-between; gap: 10px; margin: 15px 0; }
  .mood-btn {
    flex: 1;
    padding: 15px 5px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    transition: 0.2s;
  }
  .mood-btn:hover { filter: brightness(0.9); }
  .mood-btn.good { background: #e8f5e9; color: var(--good); }
  .mood-btn.okay { background: #fff3e0; color: var(--okay); }
  .mood-btn.low { background: #ffebee; color: var(--low); }

  /* History Grid */
  .history-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-top: 10px; }
  .day-dot { height: 35px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 10px; background: #eee; }

  /* Breathing Circle */
  #circle-container { height: 200px; display: flex; align-items: center; justify-content: center; position: relative; }
  #breathingCircle {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: var(--primary);
    opacity: 0.7;
    transition: transform 4s ease-in-out;
  }
  #breathingText { position: absolute; font-weight: bold; color: var(--primary); }

  /* Bottom Nav */
  nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: white;
    display: flex;
    justify-content: space-around;
    padding: 15px 0;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
  }
  nav button { background: none; border: none; color: #666; font-size: 12px; cursor: pointer; }
  nav button.active { color: var(--primary); font-weight: bold; }

  textarea { width: 100%; border: 1px solid #ddd; border-radius: 8px; padding: 10px; box-sizing: border-box; resize: none; }
</style>
</head>
<body>

<header>
  <h1 style="margin:0">MindCheck</h1>
  <p id="header-tip">"Take a deep breath."</p>
</header>

<div id="home" class="view active">
  <div class="card">
    <h2>Daily Check-in</h2>
    <div class="mood-selector">
      <button class="mood-btn good" onclick="saveData('Good', 'üòä')">Good</button>
      <button class="mood-btn okay" onclick="saveData('Okay', 'üòê')">Okay</button>
      <button class="mood-btn low" onclick="saveData('Low', 'üòû')">Low</button>
    </div>
    <textarea id="journal" rows="3" placeholder="What's on your mind? (Optional)"></textarea>
  </div>

  <div class="card">
    <h3>Weekly Outlook</h3>
    <div class="history-grid" id="historyGrid"></div>
  </div>
</div>

<div id="breathe" class="view">
  <div class="card" style="text-align: center;">
    <h2>Box Breathing</h2>
    <p>Calm your nervous system.</p>
    <div id="circle-container">
      <div id="breathingCircle"></div>
      <div id="breathingText">Ready?</div>
    </div>
    <button onclick="toggleBreathing()" id="breathBtn" style="background:var(--primary); color:white; border:none; padding:10px 30px; border-radius:20px;">Start</button>
  </div>
</div>

<div id="help" class="view">
  <div class="card">
    <h2>Support Hotlines</h2>
    <p>Speak to someone today:</p>
    <a href="tel:0722178177" style="display:block; padding:15px; background:#f0f0f0; border-radius:10px; text-decoration:none; color:black; margin-bottom:10px;">üìû Befrienders Kenya: 0722 178 177</a>
    <a href="tel:1199" style="display:block; padding:15px; background:#f0f0f0; border-radius:10px; text-decoration:none; color:black;">üìû Red Cross: 1199</a>
  </div>
</div>

<nav>
  <button onclick="showView('home')" id="nav-home" class="active">üè†<br>Home</button>
  <button onclick="showView('breathe')" id="nav-breathe">üå¨Ô∏è<br>Breathe</button>
  <button onclick="showView('help')" id="nav-help">‚ù§Ô∏è<br>Help</button>
</nav>

<script>
  // Navigation Logic
  function showView(viewId) {
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById(viewId).classList.add('active');
    document.getElementById('nav-' + viewId).classList.add('active');
  }

  // Data Logic
  function saveData(mood, emoji) {
    const journal = document.getElementById('journal').value;
    let history = JSON.parse(localStorage.getItem('mindHistory')) || [];
    const entry = {
      date: new Date().toLocaleDateString('en-GB', {weekday: 'short'}),
      mood: mood,
      emoji: emoji,
      note: journal,
      timestamp: new Date().getTime()
    };
    
    history.push(entry);
    if(history.length > 7) history.shift();
    localStorage.setItem('mindHistory', JSON.stringify(history));
    document.getElementById('journal').value = "";
    renderHistory();
    alert("Mood logged! Take care of yourself.");
  }

  function renderHistory() {
    const history = JSON.parse(localStorage.getItem('mindHistory')) || [];
    const grid = document.getElementById('historyGrid');
    grid.innerHTML = "";
    
    // Create 7 empty/filled slots
    for(let i=0; i<7; i++) {
      const day = history[i];
      const dot = document.createElement('div');
      dot.className = 'day-dot';
      if(day) {
        dot.innerText = day.emoji;
        if(day.mood === 'Good') dot.style.background = '#e8f5e9';
        if(day.mood === 'Low') dot.style.background = '#ffebee';
      } else {
        dot.innerText = "-";
      }
      grid.appendChild(dot);
    }
  }

  // Breathing Logic
  let breathInterval;
  let isBreathing = false;

  function toggleBreathing() {
    const btn = document.getElementById('breathBtn');
    const circle = document.getElementById('breathingCircle');
    const text = document.getElementById('breathingText');
    
    if (isBreathing) {
      clearInterval(breathInterval);
      btn.innerText = "Start";
      text.innerText = "Ready?";
      circle.style.transform = "scale(1)";
      isBreathing = false;
    } else {
      isBreathing = true;
      btn.innerText = "Stop";
      runBreathingCycle();
      breathInterval = setInterval(runBreathingCycle, 14000);
    }
  }

  function runBreathingCycle() {
    const circle = document.getElementById('breathingCircle');
    const text = document.getElementById('breathingText');
    
    text.innerText = "Inhale...";
    circle.style.transform = "scale(1.8)";
    
    setTimeout(() => { if(isBreathing) text.innerText = "Hold..."; }, 4000);
    setTimeout(() => { 
      if(isBreathing) {
        text.innerText = "Exhale..."; 
        circle.style.transform = "scale(1)";
      }
    }, 8000);
  }

  // Initial Load
  renderHistory();
</script>

</body>
</html>
