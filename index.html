<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MindCheck | AI Thought Partner</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #7d5fff; --bg: #fdfbff; --text: #1e272e;
            --card: #ffffff; --user-msg: #efedff; --bot-msg: #7d5fff;
        }
        body.dark-mode {
            --bg: #121212; --text: #e0e0e0; --card: #1e1e1e;
            --user-msg: #2d2d2d; --bot-msg: #a29bfe;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Outfit', sans-serif; }
        body { background: var(--bg); margin: 0; color: var(--text); height: 100vh; overflow: hidden; transition: 0.3s; }

        /* --- Auth Screen --- */
        #auth-screen { position: fixed; inset: 0; background: var(--primary); z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: white; padding: 40px; border-radius: 35px; width: 90%; max-width: 400px; text-align: center; color: #333; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
        .auth-card input { width: 100%; padding: 15px; margin: 15px 0; border-radius: 15px; border: 1px solid #ddd; outline: none; }

        /* --- App Shell --- */
        .app-shell { height: 100vh; display: none; flex-direction: column; }
        .view { display: none; flex: 1; overflow-y: auto; padding: 20px 20px 120px; }
        .view.active { display: flex; flex-direction: column; animation: slideUp 0.4s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } }

        /* --- Chat UI --- */
        #chat-log { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; padding-bottom: 10px; }
        .bubble { max-width: 85%; padding: 14px 18px; border-radius: 22px; font-size: 15px; line-height: 1.5; }
        .bot { background: var(--bot-msg); color: white; align-self: flex-start; border-bottom-left-radius: 4px; }
        .user { background: var(--user-msg); color: var(--text); align-self: flex-end; border-bottom-right-radius: 4px; }

        .input-bar { background: var(--card); padding: 10px; border-radius: 30px; display: flex; align-items: center; gap: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        #user-input { flex: 1; border: none; background: transparent; color: var(--text); padding: 10px; outline: none; font-size: 16px; }

        /* --- Nav --- */
        nav { position: fixed; bottom: 25px; left: 20px; right: 20px; background: #1e272e; height: 75px; border-radius: 38px; display: flex; justify-content: space-around; align-items: center; }
        .nav-btn { background: none; border: none; color: #808e9b; font-size: 24px; cursor: pointer; transition: 0.3s; }
        .nav-btn.active { color: white; transform: translateY(-5px); }
    </style>
</head>
<body>

    <div id="auth-screen">
        <div class="auth-card">
            <h1 style="margin:0">üåø</h1>
            <h2>MindCheck Super App</h2>
            <p>Enter your name to begin.</p>
            <input type="text" id="username" placeholder="Your Name">
            <button onclick="login()" style="width:100%; padding:15px; background:var(--primary); color:white; border:none; border-radius:15px; font-weight:700; cursor:pointer;">Launch Session</button>
        </div>
    </div>

    <div class="app-shell" id="app-shell">
        <main id="home" class="view active">
            <header><h1 id="greet" style="margin:0">Hi</h1></header>
            <div id="chat-log"></div>
            <div class="input-bar">
                <input type="text" id="user-input" placeholder="Type a thought..." autocomplete="off">
                <button onclick="send()" style="background:var(--primary); color:white; border:none; width:45px; height:45px; border-radius:50%; cursor:pointer;">‚Üë</button>
            </div>
        </main>

        <main id="settings" class="view">
            <header><h1>Settings</h1></header>
            <div style="background:var(--card); padding:20px; border-radius:25px;">
                <p>User Account: <b id="u-display">...</b></p>
                <button onclick="document.body.classList.toggle('dark-mode')" style="width:100%; padding:12px; border:none; border-radius:12px; background:#f1f2f6; margin-bottom:10px; cursor:pointer;">Toggle Dark Mode</button>
                <button onclick="localStorage.clear(); location.reload();" style="width:100%; padding:15px; background:#ffebee; color:red; border:none; border-radius:15px; margin-top:20px; cursor:pointer;">Logout & Delete Memory</button>
            </div>
            <p style="text-align:center; color:#999; font-size:12px; margin-top:20px;">MindCheck Pro v4.0 | Fully Reasoning AI</p>
        </main>

        <nav>
            <button class="nav-btn active" onclick="tab('home', this)">üè†</button>
            <button class="nav-btn" onclick="tab('settings', this)">‚öôÔ∏è</button>
        </nav>
    </div>

    <script>
        let userName = "";
        let convoMemory = [];

        function login() {
            userName = document.getElementById('username').value;
            if(!userName) return;
            localStorage.setItem('mind_super_final', userName);
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('app-shell').style.display = 'flex';
            document.getElementById('u-display').innerText = userName;
            init();
        }

        function init() {
            const hr = new Date().getHours();
            const timeGreet = hr < 12 ? "Good morning" : hr < 18 ? "Good afternoon" : "Good evening";
            document.getElementById('greet').innerText = `${timeGreet}, ${userName}`;
            addBubble(`Hey ${userName}. I'm here to listen. Tell me what‚Äôs actually on your mind today‚Äîno filters needed.`, 'bot');
        }

        function tab(id, btn) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active');
        }

        function send() {
            const input = document.getElementById('user-input');
            const val = input.value.trim();
            if(!val) return;
            addBubble(val, 'user');
            convoMemory.push(val.toLowerCase());
            input.value = "";
            setTimeout(() => {
                addBubble(reasonAI(val.toLowerCase()), 'bot');
            }, 800);
        }

        function addBubble(txt, side) {
            const log = document.getElementById('chat-log');
            const div = document.createElement('div');
            div.className = `bubble ${side}`;
            div.innerText = txt;
            log.appendChild(div);
            log.scrollTop = log.scrollHeight;
        }

        function reasonAI(input) {
            // Memory Check
            if (input.includes("remember")) {
                return convoMemory.length > 1 
                    ? `I'm keeping track. You recently mentioned: "${convoMemory[convoMemory.length-2]}". How are you feeling about that now?` 
                    : "I'm focusing deeply on what you're saying right now. Tell me more.";
            }

            // Heavy Emotion Pool
            if (input.match(/sad|hurt|lonely|tired|fail|difficult|bad|cry|heavy|exhausted|stress/)) {
                const sadPool = [
                    "I hear the weight in that. It's okay to sit with that feeling‚Äîyou don't have to fix it for me. What's the toughest part today?",
                    "That sounds incredibly draining. I'm right here with you. Do you feel like you have enough space to just breathe right now?",
                    "I can feel how much you're carrying. Thank you for being honest with me. What would 'rest' look like for you today?",
                    "It makes sense that you're feeling this way. I'm not here to give you advice, just to listen. Want to vent more?"
                ];
                return sadPool[Math.floor(Math.random() * sadPool.length)];
            }

            // Joy Pool
            if (input.match(/happy|good|great|won|amazing|love|win|smile|better/)) {
                const joyPool = [
                    `I love that for you, ${userName}! ‚ú® It‚Äôs so good to see a win. What was the exact moment you realized today was looking up?`,
                    "That is such a spark! You deserve to hold onto this feeling. How are you going to protect this energy today?",
                    "Yes! I'm genuinely happy to hear that. What's one thing you're proud of yourself for in this moment?",
                    "That sounds wonderful. It‚Äôs important to acknowledge the good stuff. What made that happen?"
                ];
                return joyPool[Math.floor(Math.random() * joyPool.length)];
            }

            // Humanized Neutral Inquiries (The Fix for "Am following you")
            const fallbackPool = [
                "That's an interesting perspective. How are you honestly navigating that in your head?",
                "I'm curious‚Äîis this something that's been on your mind for a while?",
                "I see. If you had to describe the vibe of your day in one word
